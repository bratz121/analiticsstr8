{"ast":null,"code":"import{useState}from\"react\";export function useAuth(){const[authState,setAuthState]=useState(()=>{const token=localStorage.getItem(\"token\");const username=localStorage.getItem(\"username\");const role=localStorage.getItem(\"role\");return{isAuthenticated:!!token,isAdmin:role===\"admin\",token,username};});const login=(token,username,role)=>{localStorage.setItem(\"token\",token);localStorage.setItem(\"username\",username);localStorage.setItem(\"role\",role);setAuthState({isAuthenticated:true,isAdmin:role===\"admin\",token,username});};const logout=()=>{localStorage.removeItem(\"token\");localStorage.removeItem(\"username\");localStorage.removeItem(\"role\");setAuthState({isAuthenticated:false,isAdmin:false,token:null,username:null});};return{...authState,login,logout};}","map":{"version":3,"names":["useState","useAuth","authState","setAuthState","token","localStorage","getItem","username","role","isAuthenticated","isAdmin","login","setItem","logout","removeItem"],"sources":["C:/Users/zelud/OneDrive/Desktop/str8/analiticsstr8/src/hooks/useAuth.ts"],"sourcesContent":["import { useState } from \"react\";\r\n\r\ninterface AuthState {\r\n  isAuthenticated: boolean;\r\n  isAdmin: boolean;\r\n  token: string | null;\r\n  username: string | null;\r\n}\r\n\r\nexport function useAuth() {\r\n  const [authState, setAuthState] = useState<AuthState>(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    const username = localStorage.getItem(\"username\");\r\n    const role = localStorage.getItem(\"role\");\r\n\r\n    return {\r\n      isAuthenticated: !!token,\r\n      isAdmin: role === \"admin\",\r\n      token,\r\n      username,\r\n    };\r\n  });\r\n\r\n  const login = (token: string, username: string, role: string) => {\r\n    localStorage.setItem(\"token\", token);\r\n    localStorage.setItem(\"username\", username);\r\n    localStorage.setItem(\"role\", role);\r\n\r\n    setAuthState({\r\n      isAuthenticated: true,\r\n      isAdmin: role === \"admin\",\r\n      token,\r\n      username,\r\n    });\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"username\");\r\n    localStorage.removeItem(\"role\");\r\n\r\n    setAuthState({\r\n      isAuthenticated: false,\r\n      isAdmin: false,\r\n      token: null,\r\n      username: null,\r\n    });\r\n  };\r\n\r\n  return {\r\n    ...authState,\r\n    login,\r\n    logout,\r\n  };\r\n}\r\n"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,OAAO,CAShC,MAAO,SAAS,CAAAC,OAAOA,CAAA,CAAG,CACxB,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGH,QAAQ,CAAY,IAAM,CAC1D,KAAM,CAAAI,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,QAAQ,CAAGF,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CACjD,KAAM,CAAAE,IAAI,CAAGH,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAEzC,MAAO,CACLG,eAAe,CAAE,CAAC,CAACL,KAAK,CACxBM,OAAO,CAAEF,IAAI,GAAK,OAAO,CACzBJ,KAAK,CACLG,QACF,CAAC,CACH,CAAC,CAAC,CAEF,KAAM,CAAAI,KAAK,CAAGA,CAACP,KAAa,CAAEG,QAAgB,CAAEC,IAAY,GAAK,CAC/DH,YAAY,CAACO,OAAO,CAAC,OAAO,CAAER,KAAK,CAAC,CACpCC,YAAY,CAACO,OAAO,CAAC,UAAU,CAAEL,QAAQ,CAAC,CAC1CF,YAAY,CAACO,OAAO,CAAC,MAAM,CAAEJ,IAAI,CAAC,CAElCL,YAAY,CAAC,CACXM,eAAe,CAAE,IAAI,CACrBC,OAAO,CAAEF,IAAI,GAAK,OAAO,CACzBJ,KAAK,CACLG,QACF,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAM,MAAM,CAAGA,CAAA,GAAM,CACnBR,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC,CAChCT,YAAY,CAACS,UAAU,CAAC,UAAU,CAAC,CACnCT,YAAY,CAACS,UAAU,CAAC,MAAM,CAAC,CAE/BX,YAAY,CAAC,CACXM,eAAe,CAAE,KAAK,CACtBC,OAAO,CAAE,KAAK,CACdN,KAAK,CAAE,IAAI,CACXG,QAAQ,CAAE,IACZ,CAAC,CAAC,CACJ,CAAC,CAED,MAAO,CACL,GAAGL,SAAS,CACZS,KAAK,CACLE,MACF,CAAC,CACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}